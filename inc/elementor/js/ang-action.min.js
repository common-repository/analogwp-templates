"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],o=!0,a=!1,r=void 0;try{for(var i,l=e[Symbol.iterator]();!(o=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){a=!0,r=e}finally{try{o||null==l.return||l.return()}finally{if(a)throw r}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}!function(e,t){t.fn.classList=function(){return this[0].className.split(/\s+/)};var n=function(){elementor.once("preview:loaded",function(){if(void 0!==elementor.config.initial_document.panel&&elementor.config.initial_document.panel.support_kit&&(setTimeout(function(){var e=parseInt(elementor.settings.page.model.attributes.ang_updated_token),t=parseInt(elementor.settings.page.model.attributes.ang_action_tokens);if(!isNaN(e)&&t!==e){var n=$e.internal("document/history/start-log",{type:"update",title:"Switch Kit"});elementor.settings.page.model.setExternalChange("ang_updated_token",t),$e.internal("document/history/end-log",{id:n}),$e.run("document/save/update",{force:!0}).then(function(){$e.run("panel/global/open").then(function(){elementor.notifications.showToast({message:ANG_Action.translate.kitSwitcherNotice,classes:"ang-kit-apply-notice",buttons:[{name:"ang_panel_redirect",text:ANG_Action.translate.kitSwitcherSKSwitch,callback:function(){var e=$e.routes.current.panel.toString();e.includes("panel/global")?$e.run("panel/global/close").then(function(){analog.redirectToSection()}):analog.redirectToSection()}},{name:"back_to_editor",text:ANG_Action.translate.kitSwitcherEditorSwitch,callback:function(){var e=$e.routes.current.panel.toString();e.includes("panel/global")&&$e.run("panel/global/close")}}]})})})}},1e3),elementor.config.user.can_edit_kit)){if("kit"===elementor.config.initial_document.type)return elementor.$previewContents.find("body").removeClass("elementor-kit-".concat(elementor.config.kit_id)).addClass("elementor-kit-".concat(elementor.config.document.id)),void analog.enqueueFonts();var e=elementor.documents.documents[elementor.config.initial_document.id].container,t=e.settings.attributes.ang_action_tokens,n=e.controls.ang_action_tokens.options;""!==t&&parseInt(t)in n||elementor.settings.page.model.setExternalChange("ang_action_tokens",AGWP.global_kit),elementor.settings.page.addChangeCallback("ang_action_tokens",analog.kitSwitcher),!ANG_Action.globalKit||parseInt(elementor.settings.page.model.attributes.ang_action_tokens)in elementor.settings.page.model.controls.ang_action_tokens.options||elementor.settings.page.model.setExternalChange("ang_action_tokens",ANG_Action.globalKit);var o=elementor.settings.page.model.attributes.ang_action_tokens;void 0!==o&&(elementor.config.kit_id=o,analog.fixKitClasses(),analog.setPanelTitle(o),analog.loadDocumentAndEnqueueFonts(o,!0))}})};t(e).on("elementor/init",function(){new n})}(window,jQuery),jQuery(window).on("elementor/init",function(){var r=window.analog=window.analog||{};elementor.settings.page.model.attributes;function s(e,t,n){return e.replace(new RegExp(function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(t),"g"),n)}r.style_kit_updated=!1,r.sk_modal_shown=!1,ANG_Action.skPanelsAllowed||jQuery("head").append('<style id="sk-panels-allowed">.elementor-panel [class*="elementor-control-ang_"], .elementor-panel [class*="elementor-control-description_ang_"] {display:none;}</style>'),r.fixKitClasses=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:elementor.config.kit_id;elementor.$previewContents.find("body").classList().filter(function(e){return e.startsWith("elementor-kit-")}).forEach(function(e){elementor.$previewContents.find("body").removeClass(e)}),elementor.$previewContents.find("body").addClass("elementor-kit-".concat(e))},r.loadDocumentAndEnqueueFonts=function(s){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];elementor.documents.request(s).then(function(e){elementor.documents.addDocumentByConfig(e),!elementor.$previewContents.find("#elementor-post-".concat(e.id,"-css")).length&&t&&r.openThemeStyles()}).then(function(){for(var e=elementor.documents.get(s),t=e.config.settings.settings,n=e.config.settings.controls,o=0,a=Object.entries(t);o<a.length;o++){var r=_slicedToArray(a[o],2),i=r[0],l=r[1];n[i]&&"font"===n[i].type&&l&&elementor.helpers.enqueueFont(l)}})},r.enqueueFonts=function(){for(var e=elementor.settings.page.model.attributes,t=elementor.settings.page.model.controls,n=0,o=Object.entries(e);n<o.length;n++){var a=_slicedToArray(o[n],2),r=a[0],i=a[1];t[r]&&"font"===t[r].type&&i&&elementor.helpers.enqueueFont(i)}},r.refreshKit=function(e){r.setPanelTitle(e),elementor.config.kit_id=e,r.fixKitClasses(e),r.loadDocumentAndEnqueueFonts(e)},r.kitSwitcher=function(e){elementor.config.kit_id!==e&&(elementor.settings.page.model.setExternalChange("ang_updated_token",elementor.config.kit_id),r.refreshKit(e),setTimeout(function(){$e.run("document/save/update").then(function(){window.location.reload()})},1e3))},r.setPanelTitle=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=elementor.documents.documents[elementor.config.initial_document.id].container;e||(e=t.settings.attributes.ang_action_tokens);var n=t.controls.ang_action_tokens.options[e];""!==n&&"undefined"!==n&&void 0!==n&&(elementor.getPanelView().getPages().kit_settings.title=elementor.translate("Theme Style")+" - "+n)},r.openThemeStyles=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"theme-style-kits";"panel/global/".concat(e)in $e.routes.components?setTimeout(function(){$e.run("panel/global/open").then(function(){return setTimeout(function(){return $e.route("panel/global/".concat(e))})})}):$e.run("panel/global/open")},r.openGlobalColors=function(){r.redirectToPanel("ang_global_colors_section","global-colors")},r.openGlobalFonts=function(){r.redirectToPanel("ang_global_fonts_section","global-typography")};r.redirectToSection=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"settings",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"ang_style_settings",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"page-settings",o=3<arguments.length&&void 0!==arguments[3]&&arguments[3];return $e.route("panel/".concat(n,"/").concat(e)),o?elementor.getPanelView().getCurrentPageView().content.currentView.activateSection(t).render():elementor.getPanelView().getCurrentPageView().activateSection(t)._renderChildren(),!1},r.redirectToPanel=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"theme-style-kits";$e.run("panel/global/open").then(function(){$e.route("panel/global/".concat(t)),elementor.getPanelView().getCurrentPageView().content.currentView.activateSection(e).render()})},r.switchKitSection=function(e){elementor.getPanelView().setPage("kit_settings").content.currentView.activateSection(e).activateTab("style")},r.resetStyles=function(){$e.run("document/elements/reset-settings",{container:elementor.documents.documents[elementor.config.kit_id].container,settings:null}),$e.run("document/save/update").then(function(){return $e.run("panel/global/close").then(function(){return r.redirectToPanel("ang_tools")})})},elementor.on("preview:loaded",function(){jQuery("body").toggleClass("dark-mode","dark"===elementor.settings.editorPreferences.model.attributes.ui_theme)}),jQuery("#elementor-panel").on("change",'[data-setting="ui_theme"]',function(e){var t=e.target.value;jQuery("body").toggleClass("dark-mode","dark"===t)}),r.handleCSSReset=function(){elementorCommon.dialogsManager.createWidget("confirm",{message:ANG_Action.translate.resetMessage,headerMessage:ANG_Action.translate.resetHeader,strings:{confirm:elementor.translate("yes"),cancel:elementor.translate("cancel")},defaultOption:"cancel",onConfirm:r.resetStyles}).show()},r.handleSaveToken=function(){var a=elementorCommon.dialogsManager.createWidget("lightbox",{id:"ang-modal-save-token",className:"dialog-type-confirm",headerMessage:ANG_Action.translate.saveToken,message:"",position:{my:"center",at:"center"},onReady:function(){this.addButton({name:"cancel",text:ANG_Action.translate.cancel,callback:function(){a.destroy()}}),this.addButton({name:"ok",text:ANG_Action.translate.saveToken2,callback:function(e){var t=e.getElements("content").find("#ang_token_title").val();if(t){var n={},o=elementor.documents.documents[elementor.config.kit_id].container.settings.attributes;_.map(o,function(e,t){(function(e){return!(e.startsWith("ang_action")||e.startsWith("post")||e.startsWith("preview"))})(t)&&(n[t]=e)}),wp.apiFetch({url:ANG_Action.saveToken,method:"post",data:{id:elementor.config.kit_id,title:t,settings:JSON.stringify(n)}}).then(function(e){a.destroy(),$e.run("document/save/discard"),$e.run("panel/global/close").then(function(){elementor.settings.page.model.setExternalChange("ang_action_tokens",e.id),r.kitSwitcher(e.id)}),elementor.notifications.showToast({message:e.message})}).catch(function(e){elementorCommon.dialogsManager.createWidget("alert",{headerMessage:e.code,message:e.message}).show()})}else elementor.notifications.showToast({message:"Please enter a title to save your Kit."})}})},onShow:function(){a.getElements("content").append('<input id="ang_token_title" type="text" value="" placeholder="'.concat(ANG_Action.translate.enterTitle,'" />'))}});a.getElements("message").append(a.addElement("content")),a.show(),jQuery(window).resize()},r.handleCSSExport=function(){var e=elementor.settings.page.getControlsCSS().elements.$stylesheetElement[0].textContent,t=elementor.settings.page.model.get("custom_css"),n=e.replace(t,""),l=cssbeautify(n,{indent:"  ",openbrace:"end-of-line",autosemicolon:!0}),o=function(e){var t=e.target.checked,n="body.elementor-kit-".concat(elementor.config.document.id),o="body.elementor-page",a=jQuery("#ang-export-css");if(t){var r=s(l,n+" ",o+" ");r=s(r=s(r,n+":",o+":"),n+",",o+","),jQuery(a).html(r)}else{var i=s(l,o+" ",n+" ");i=s(i=s(i,o+":",n+":"),o+",",n+","),jQuery(a).html(i)}},a=elementorCommon.dialogsManager.createWidget("lightbox",{id:"ang-modal-export-css",className:"dialog-type-confirm",headerMessage:ANG_Action.translate.exportCSS,message:"",position:{my:"center",at:"center"},onReady:function(){this.addButton({name:"cancel",text:elementor.translate("cancel"),callback:function(){a.destroy()}}),this.addButton({name:"ok",text:ANG_Action.translate.copyCSS,callback:function(){var e=a.getElements("content").find("#ang-export-css");if(navigator.clipboard){var t=e[0].innerHTML;navigator.clipboard.writeText(t).then(function(){elementor.notifications.showToast({message:ANG_Action.translate.cssCopied})})}else jQuery(e).select(),document.execCommand("copy"),elementor.notifications.showToast({message:ANG_Action.translate.cssCopied})}})},onShow:function(){a.getElements("content").append('\n\t\t\t\t\t\t<textarea id="ang-export-css" rows="10">'.concat(l,'</textarea>\n\t\t\t\t\t\t<div style="text-align:left;">\n\t\t\t\t\t\t\t<input type="checkbox" id="ang-switch-selector" />\n\t\t\t\t\t\t\t<label for="ang-switch-selector">').concat(ANG_Action.translate.cssSelector,"</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t")),jQuery("#ang-switch-selector").bind("change",o)},onHide:function(){setTimeout(function(){a.destroy()},200)}});a.getElements("message").append(a.addElement("content")),a.show(),jQuery(window).resize()},r.resetGlobalColors=function(){var n={};["ang_global_background_colors","ang_global_accent_colors","ang_global_text_colors","ang_global_extra_colors","ang_global_secondary_part_one_colors","ang_global_secondary_part_two_colors","ang_global_tertiary_part_one_colors","ang_global_tertiary_part_two_colors"].forEach(function(e){var t=elementor.documents.documents[elementor.config.kit_id].container.controls[e];null!=t&&(n[e]=t.default)}),$e.run("document/elements/settings",{container:elementor.documents.documents[elementor.config.kit_id].container,settings:n,options:{external:!0}}),$e.run("document/save/update").then(function(){return $e.run("panel/global/close").then(function(){return r.openGlobalColors()})})},r.handleGlobalColorsReset=function(){elementorCommon.dialogsManager.createWidget("confirm",{message:ANG_Action.translate.resetGlobalColorsMessage,headerMessage:ANG_Action.translate.resetHeader,strings:{confirm:elementor.translate("yes"),cancel:elementor.translate("cancel")},defaultOption:"cancel",onConfirm:r.resetGlobalColors}).show()},r.resetGlobalFonts=function(){var n={};["ang_global_title_fonts","ang_global_text_fonts","ang_global_secondary_part_one_fonts","ang_global_secondary_part_two_fonts","ang_global_tertiary_part_one_fonts","ang_global_tertiary_part_two_fonts"].forEach(function(e){var t=elementor.documents.documents[elementor.config.kit_id].container.controls[e];null!=t&&(n[e]=t.default)}),$e.run("document/elements/settings",{container:elementor.documents.documents[elementor.config.kit_id].container,settings:n,options:{external:!0}}),$e.run("document/save/update").then(function(){return $e.run("panel/global/close").then(function(){return r.openGlobalFonts()})})},r.handleGlobalFontsReset=function(){elementorCommon.dialogsManager.createWidget("confirm",{message:ANG_Action.translate.resetGlobalFontsMessage,headerMessage:ANG_Action.translate.resetHeader,strings:{confirm:elementor.translate("yes"),cancel:elementor.translate("cancel")},defaultOption:"cancel",onConfirm:r.resetGlobalFonts}).show()},r.resetContainerPadding=function(){var n={};["ang_container_padding","ang_container_padding_part_two","ang_container_padding_secondary","ang_container_padding_tertiary","ang_custom_container_padding"].forEach(function(e){var t=elementor.documents.documents[elementor.config.kit_id].container.controls[e];null!=t&&(n[e]=t.default)}),$e.run("document/elements/settings",{container:elementor.documents.documents[elementor.config.kit_id].container,settings:n,options:{external:!0}}),$e.run("document/save/update").then(function(){return $e.run("panel/global/close").then(function(){return r.redirectToPanel("ang_container_spacing")})})},r.handleContainerPaddingReset=function(){elementorCommon.dialogsManager.createWidget("confirm",{message:ANG_Action.translate.resetContainerPaddingMessage,headerMessage:ANG_Action.translate.resetHeader,strings:{confirm:elementor.translate("yes"),cancel:elementor.translate("cancel")},defaultOption:"cancel",onConfirm:r.resetContainerPadding}).show()},r.resetBoxShadows=function(){var t={};["ang_box_shadows","ang_box_shadows_secondary","ang_box_shadows_tertiary"].forEach(function(e){return t[e]=elementor.documents.documents[elementor.config.kit_id].container.controls[e].default}),$e.run("document/elements/settings",{container:elementor.documents.documents[elementor.config.kit_id].container,settings:t,options:{external:!0}}),$e.run("document/save/update").then(function(){return $e.run("panel/global/close").then(function(){return r.redirectToPanel("ang_shadows")})})},r.handleResetBoxShadows=function(){elementorCommon.dialogsManager.createWidget("confirm",{message:ANG_Action.translate.resetShadowsDesc,headerMessage:ANG_Action.translate.resetHeader,strings:{confirm:elementor.translate("yes"),cancel:elementor.translate("cancel")},defaultOption:"cancel",onConfirm:r.resetBoxShadows}).show()},elementor.channels.editor.on("analog:resetContainerPadding",r.handleContainerPaddingReset),elementor.channels.editor.on("analog:resetGlobalColors",r.handleGlobalColorsReset),elementor.channels.editor.on("analog:resetGlobalFonts",r.handleGlobalFontsReset),elementor.channels.editor.on("analog:resetBoxShadows",r.handleResetBoxShadows),elementor.channels.editor.on("analog:resetKit",r.handleCSSReset),elementor.channels.editor.on("analog:saveKit",r.handleSaveToken),elementor.channels.editor.on("analog:exportCSS",r.handleCSSExport)});